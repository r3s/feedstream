<!doctype html>
<html>
    <head>
        <title>FeedStream - Feeds</title>
        <link rel="icon" type="image/x-icon" href="/static/favicon.ico">
        <link rel="stylesheet" type="text/css" href="/static/css/style.css" />
    </head>
    <body>
        <div class="container">
            <div class="header">
                <h1>FeedStream</h1>
                <div>
                    <a href="/feeds/add" class="btn">Add Feed</a>
                    <a href="/feeds/manage" class="btn">Manage Feeds</a>
                    <a href="/feeds/refresh" class="btn">Refresh Feeds</a>
                    <button id="theme-toggle" class="btn theme-toggle">ðŸŒ™</button>
                    <a href="/logout" class="btn">Logout</a>
                </div>
            </div>
            
            <div class="filter-section">
                <label for="feed-filter">Filter by feed:</label>
                <select id="feed-filter">
                    <option value="all">All</option>
                    {{range .FeedNames}}
                    <option value="{{.}}">{{.}}</option>
                    {{end}}
                </select>
            </div>
            
            <div id="feed-content">
                {{if .DateGroups}}
                {{range .DateGroups}}
                <div class="date-section">
                    <h2 class="date-header">{{.Date}}</h2>
                    <div class="feed-items-grid">
                        {{range .Items}}
                        <div class="feed-item {{if .IsNew}}new{{end}}" data-feed-name="{{.FeedName}}">
                            <h3>
                                <a href="{{.Link}}" target="_blank" rel="noopener">{{.Title}}</a>
                            </h3>
                            {{if .Description}}
                            <div class="feed-description">{{.Description}}</div>
                            {{end}}
                            <div class="item-meta">
                                <span class="feed-name">{{.FeedName}}</span> |
                                <span class="publish-date">{{.PublishedAt.Format "Jan 2, 2006 3:04 PM"}}</span>
                            </div>
                        </div>
                        {{end}}
                    </div>
                </div>
                {{end}}
                {{if .HasMore}}
                <div class="load-more-section">
                    <button id="load-more-btn" class="btn load-more-btn" data-next-offset="{{.NextOffset}}">
                        Load More (Next 60 Days)
                    </button>
                    <div id="loading" class="loading-indicator" style="display: none">
                        Loading more articles...
                    </div>
                </div>
                {{end}}
                {{else}}
                <div class="empty-state">
                    <h2>No feed items yet</h2>
                    <p>
                        Start by <a href="/feeds/add">adding some RSS feeds</a> and then
                        refresh to see the latest articles.
                    </p>
                </div>
                {{end}}
            </div>
        </div>

        <script src="/static/js/theme.js"></script>
        <script src="/static/js/feeds.js"></script>
    </body>
</html>